---
import { PAGINATION } from '@constants/layout';
import { getNonFeaturedPosts } from '@lib/content';
import type { PaginateFunction } from 'astro';
import { defaultLocale, localeList } from '@/i18n/config';
import PostListPage from '../../posts/[...page].astro';

export async function getStaticPaths({ paginate }: { paginate: PaginateFunction }) {
  const nonDefaultLocales = localeList.filter((l) => l !== defaultLocale);
  const paths = [];

  for (const lang of nonDefaultLocales) {
    const posts = await getNonFeaturedPosts(lang);
    paths.push(...paginate(posts, { pageSize: PAGINATION.pageSize, params: { lang } }));
  }

  return paths;
}

const { page } = Astro.props;
---
<PostListPage page={page} />
